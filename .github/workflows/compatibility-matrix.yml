name: Cross-Environment Compatibility Matrix

on:
    workflow_dispatch:
jobs:
    setup:
        strategy:
            matrix:
                os: [ubuntu-latest]
                browser: [chromium, firefox, webkit]
                # devices: [Iphone 15 pro max, Ipad 11 pro]
        runs-on: ${{ matrix.os }}
        steps:
            - name: Set up ${{ matrix.os }} with ${{ matrix.browser }}
              run: echo "Setting up environment for ${{ matrix.os }} with ${{ matrix.browser }} browser"
            - name: Checkout code
              uses: actions/checkout@v4
            - name: Set up Node.js
              uses: actions/setup-node@v4
              with:
                node-version: '18'
            - name: Install dependencies
              run: npm ci
            - name: Install Playwright browsers
              run: npx playwright install ${{ matrix.browser }}
            - name: Run Playwright tests
              run: npx playwright test --project="${{ matrix.browser }}"
            # - name: Upload Playwright report
            #   uses: actions/upload-artifact@v4
            #   if: ${{ !cancelled() }}
            #   with:
            #     name: playwright-report
            #     path: playwright-report/
            #     retention-days: 30
        
     